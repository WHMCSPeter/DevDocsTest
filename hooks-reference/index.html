<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hooks-references - WHMCS Developer Documentation</title>
    <meta name="generator" content="Hugo 0.18.1" />

    
    <meta name="description" content="WHMCS developer documentation - themes, modules, hooks, oauth, api and more...">
    
    <link rel="canonical" href="//developers.whmcs.com/hooks-reference/">
    
    <meta name="author" content="WHMCS Development Team">
    

    <link rel="stylesheet" href="//developers.whmcs.com/css/bootstrap.min.css">
    <link rel="stylesheet" href="//developers.whmcs.com/css/styles.css">
    <link rel="stylesheet" href="//developers.whmcs.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="//developers.whmcs.com/css/prism.css">

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700">

    
    <link href="//developers.whmcs.com/hooks-reference/index.xml" rel="alternate" type="application/rss+xml" title="WHMCS Developer Documentation" />
    <link href="//developers.whmcs.com/hooks-reference/index.xml" rel="feed" type="application/rss+xml" title="WHMCS Developer Documentation" />
    

  </head>
  <body class="language-php">

<header class="header">





<div class="container">
<nav class="navbar navbar-whmcs">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#primary-nav" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.whmcs.com/"><img src="//developers.whmcs.com/img/logo.png" width="148" height="34"></a>
    </div>

    <div class="collapse navbar-collapse" id="primary-nav">
      <ul class="nav navbar-nav">
        <li><a href="//developers.whmcs.com/"><span class="hidden-sm">Developer Documentation</span><span class="visible-sm">Developer Docs</span></a></li>
        <li class="visible-xs"><a href="//developers.whmcs.com/">Home</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/themes/">Themes</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/languages/">Languages</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/modules/">Modules</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/oauth/">OAuth</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/hooks/">Hooks</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/api/">API</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/advanced/">Advanced</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="//developers.whmcs.com/api-reference/">API Reference</a></li>
        <li><a href="//developers.whmcs.com/hooks-reference/">Hook Reference</a></li>
        <li><a href="https://github.com/whmcs" target="_blank"><i class="fa fa-github"></i></a></li>
      </ul>
      <form class="navbar-form navbar-right visible-xs" id="docsSearchMobile">
        <div class="input-group">
          <input type="text" id="docsQueryMobile" class="form-control" placeholder="Search">
          <span class="input-group-btn">
            <button class="btn" type="submit" id="btnSearchDocsMobile"><i class="fa fa-search"></i></button>
          </span>
        </div>
      </form>
    </div>
  </div>
</nav>
</div>

<div class="headline-bar hidden-xs">
<nav class="navbar navbar-main-nav">
  <div class="container">
    <div class="collapse navbar-collapse" id="secondary-nav">
      <ul class="nav navbar-nav">
        <li><a href="//developers.whmcs.com/">Home</a></li>
            <li><a href="//developers.whmcs.com/themes/">Themes</a></li>
            <li><a href="//developers.whmcs.com/languages/">Languages</a></li>
            <li><a href="//developers.whmcs.com/modules/">Modules</a></li>
            <li><a href="//developers.whmcs.com/oauth/">OAuth</a></li>
            <li><a href="//developers.whmcs.com/hooks/">Hooks</a></li>
            <li><a href="//developers.whmcs.com/api/">API</a></li>
            <li><a href="//developers.whmcs.com/advanced/">Advanced</a></li>
      </ul>
      <form class="navbar-form navbar-right" id="docsSearch">
        <div class="input-group">
          <input type="text" id="docsQuery" class="form-control" placeholder="Search">
          <span class="input-group-btn">
            <button class="btn" type="submit" id="btnSearchDocs"><i class="fa fa-search"></i></button>
          </span>
        </div>
      </form>
    </div>
  </div>
</nav>
</div>

</header>


<main class="main">

  <div class="container">

	<h1>Pages in Hooks-reference</h1>

	
	<a href="//developers.whmcs.com/hooks-reference/" title="Hooks Reference">
		<h2>Hooks Reference</h2>
	</a>

	<br>
	Introduction Hooks allow you to execute your own code when events occur inside WHMCS.
Choose a category from the left to browse the available hook points.
Learn more about hooks

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/addon/" title="Addon">
		<h2>Addon</h2>
	</a>

	<br>
	The following hooks are provided for Addon related events.
AddonActivated Executes when an addon is activated.
Parameters    Variable Type Notes     id int The addon ID (tblhostingaddons)   userid int    serviceid int    addonid int The predefined addon ID (tbladdons)    Response No response supported
Example Code &lt;?php add_hook(&lsquo;AddonActivated&rsquo;, 1, function($vars) { // Perform hook code here.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/admin-area/" title="Admin Area">
		<h2>Admin Area</h2>
	</a>

	<br>
	The following hooks are provided for Admin Area related events.
AdminAreaClientSummaryActionLinks Allows returning of links for display on the client summary page in the Action Links section.
Parameters    Variable Type Notes     userid int The id of the user being displayed    Response An array of links to be displayed.
Example Code &lt;?php add_hook(&lsquo;AdminAreaClientSummaryActionLinks&rsquo;, 1, function($vars) { $return = []; if ($vars[&lsquo;userid&rsquo;] == 1) { $return[] = &lsquo;&lt;a href=&quot;<a href="http://www">http://www</a>.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/authentication/" title="Authentication">
		<h2>Authentication</h2>
	</a>

	<br>
	The following hooks are provided for Authentication related events.
ClientLogin Executes when a client is logging into the Client Area.
Parameters    Variable Type Notes     userid int     Response No response supported
Example Code &lt;?php add_hook(&lsquo;ClientLogin&rsquo;, 1, function($vars) { // Perform hook code here&hellip; });  ClientLoginShare Executes as part of client login if user does not exist.
Parameters    Variable Type Notes     username string    password string     Response Return data to create a user or refer to an existing client to be logged in as.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/client/" title="Client">
		<h2>Client</h2>
	</a>

	<br>
	The following hooks are provided for Client related events.
AfterClientMerge Executes after a client merge has completed.
Parameters    Variable Type Notes     toUserID int The id of the user being merged into.   fromUserID int The id of the user being merged from.    Response No response supported
Example Code &lt;?php add_hook(&lsquo;AfterClientMerge&rsquo;, 1, function($vars) { // Perform hook code here&hellip; });  ClientAlert Executes when Client Alerts are being defined

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/client-area-interface/" title="Client Area Interface">
		<h2>Client Area Interface</h2>
	</a>

	<br>
	The following hooks are provided for Client Area Interface related events.
ClientAreaDomainDetails Executes when the domain details page is loaded within the client area. This hook runs regardless of domain status, so be sure to check for the appropriate statuses if required.
Parameters    Variable Type Notes     domain \WHMCS\Domain\Domain A domain object representing the domain being rendered.    Response No response supported

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/contact/" title="Contact">
		<h2>Contact</h2>
	</a>

	<br>
	The following hooks are provided for Contact related events.
ContactAdd Executes as a contact is being added to WHMCS.
Parameters    Variable Type Notes     userid int    contactid int    firstname string    lastname string    companyname string    email string    address1 string    address2 string    city string    state string    postcode string    country string    phonenumber string    subaccount bool    password string    permissions string A comma separated list of allowed permissions for a sub-account   generalemails bool    productemails bool    domainemails bool    invoiceemails bool    supportemails bool    affiliateemails bool     Response No response supported

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/cron/" title="Cron">
		<h2>Cron</h2>
	</a>

	<br>
	The following hooks are provided for Cron related events.
AfterCronJob Runs after all scheduled cron tasks have completed.
Parameters    Variable Type Notes     No input parameters for this hook point.      Response No response supported
Example Code &lt;?php add_hook(&lsquo;AfterCronJob&rsquo;, 1, function($vars) { // Perform hook code here&hellip; });  DailyCronJob Runs at the very end of the daily automation cron execution.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/domain/" title="Domain">
		<h2>Domain</h2>
	</a>

	<br>
	The following hooks are provided for Domain related events.
DomainDelete Executes when a service is being deleted.
Parameters    Variable Type Notes     userid int    domainid int     Response No response supported
Example Code &lt;?php add_hook(&lsquo;DomainDelete&rsquo;, 1, function($vars) { // Perform hook code here&hellip; });  DomainEdit Executes as the domain is being saved, before any changes have been made.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/everything-else/" title="Everything Else">
		<h2>Everything Else</h2>
	</a>

	<br>
	The following hooks are provided for Everything Else related events.
AffiliateActivation Executes as an affiliate is being activated.
Parameters    Variable Type Notes     affid int The new unique id for the affiliate (tblaffiliates).   userid int     Response No response supported
Example Code &lt;?php add_hook(&lsquo;AffiliateActivation&rsquo;, 1, function($vars) { // Perform hook code here&hellip; });  AffiliateClickthru Executes when a user has clicked an affiliate referral link.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/invoices-and-quotes/" title="Invoices and Quotes">
		<h2>Invoices and Quotes</h2>
	</a>

	<br>
	The following hooks are provided for Invoices and Quotes related events.
AcceptQuote Executes when a client is accepting a quote.
Parameters    Variable Type Notes     quoteid int The id of the quote being accepted.   invoiceid int The id of the invoice created for the quote (if applicable).    Response No response supported
Example Code &lt;?php add_hook(&lsquo;AcceptQuote&rsquo;, 1, function($vars) { // Perform hook code here.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/module/" title="Module">
		<h2>Module</h2>
	</a>

	<br>
	The following hooks are provided for Module related events.
AfterModuleChangePackage Executes upon successful completion of the module function.
Parameters    Variable Type Notes     params array Array of common module parameters. See <a href="https://developers.whmcs.com/provisioning-modules/module-parameters/">https://developers.whmcs.com/provisioning-modules/module-parameters/</a>    Response No response supported
Example Code &lt;?php add_hook(&lsquo;AfterModuleChangePackage&rsquo;, 1, function($vars) { // Perform hook code here&hellip; });  AfterModuleChangePackageFailed Executes upon failure of the module function to complete successfully.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/output/" title="Output">
		<h2>Output</h2>
	</a>

	<br>
	The following hooks are provided for Output related events.
AdminAreaFooterOutput Runs on every admin area page load. All template variables defined at the time the hook is invoked are made availble to this hook point. This can vary by page. The list below is not an exhaustive list.
Parameters    Variable Type Notes     charset string System charset setting eg. UTF-8   template string The admin template being used   pagetemplate string The template for the current page (if applicable)   adminid int The currently logged in admin user ID   admin_username string The username of the current admin user   admin_notes string The private notes for the current admin user   admin_perms array The permissions of the current admin user   addon_modules array A list of add-on modules the current admin user has access to   filename string The name of the file being called   pagetitle string The title of the current page   helplink string The documentation url for the current page   sidebar string The sidebar output   minsidebar bool Returns true if the sidebar is minimised   jquerycode string jQuery code for the current page   jscode string Javascript code for the current page   datepickerformat string The format defined for dates in the admin area   adminsonline string A list of currently online admin users   sidebarstats array Statistics relating to orders, clients, services, tickets and more    Response Accepts HTML to be output before the closing body tag of the admin area output

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/products-and-services/" title="Products and Services">
		<h2>Products and Services</h2>
	</a>

	<br>
	The following hooks are provided for Products and Services related events.
AfterProductUpgrade Executes after a product upgrade has been processed
Parameters    Variable Type Notes     upgradeid int     Response No response supported
Example Code &lt;?php add_hook(&lsquo;AfterProductUpgrade&rsquo;, 1, function($vars) { // Perform hook code here&hellip; });  ProductDelete Executes a product is being deleted.
Parameters    Variable Type Notes     pid int     Response No response supported

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/registrar-module/" title="Registrar Module">
		<h2>Registrar Module</h2>
	</a>

	<br>
	The following hooks are provided for Registrar Module related events.
AfterRegistrarGetContactDetails Executes upon completion of the registrar module function. Will execute regardless of success state.
Parameters    Variable Type Notes     params array Array of common module parameters. See <a href="https://developers.whmcs.com/domain-registrars/module-parameters/">https://developers.whmcs.com/domain-registrars/module-parameters/</a>   results array An array of results returned from the registrar function call   functionExists bool Returns true if the registrar module supports the given action   functionSuccessful bool Returns true if the registrar function completed without error    Response No response supported

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/service/" title="Service">
		<h2>Service</h2>
	</a>

	<br>
	The following hooks are provided for Service related events.
CancellationRequest Executes as a cancellation request is being created
Parameters    Variable Type Notes     userid int    relid int The id of the service being cancelled   reason string    type string     Response No response supported
Example Code &lt;?php add_hook(&lsquo;CancellationRequest&rsquo;, 1, function($vars) { // Perform hook code here.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/shopping-cart/" title="Shopping Cart">
		<h2>Shopping Cart</h2>
	</a>

	<br>
	The following hooks are provided for Shopping Cart related events.
AcceptOrder Runs when an order is accepted prior to any acceptance actions being executed.
Parameters    Variable Type Notes     orderid int The order ID    Response No response supported
Example Code &lt;?php add_hook(&lsquo;AcceptOrder&rsquo;, 1, function($vars) { // Perform hook code here&hellip; });  AddonFraud Executes when an addon is set as fraud.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/support-tools/" title="Support Tools">
		<h2>Support Tools</h2>
	</a>

	<br>
	The following hooks are provided for Support Tools related events.
AnnouncementAdd Executes as an announcement is being added.
Parameters    Variable Type Notes     announcementid int    date string    title string    announcement string    published bool     Response No response supported
Example Code &lt;?php add_hook(&lsquo;AnnouncementAdd&rsquo;, 1, function($vars) { // Perform hook code here.

	<hr>
	
	<a href="//developers.whmcs.com/hooks-reference/ticket/" title="Ticket">
		<h2>Ticket</h2>
	</a>

	<br>
	The following hooks are provided for Ticket related events.
AdminAreaViewTicketPage Runs when an admin views a ticket.
Parameters    Variable Type Notes     ticketid int     Response Returned HTML will be output to the page.
Example Code &lt;?php use WHMCS\Session; use WHMCS\Ticket\Watchers; add_hook(&lsquo;AdminAreaViewTicketPage&rsquo;, 1, function($vars) { $return = &ldquo;; $adminId = Session::get(&lsquo;adminid&rsquo;); $adminWatchingTickets = Watchers::byAdmin($adminId)-&gt;pluck(&lsquo;ticket_id&rsquo;)-&gt;toArray(); if (in_array($vars[&lsquo;ticketid&rsquo;], $adminWatchingTickets)) { $return = &lsquo;&lt;div class=&quot;alert alert-info&quot; role=&quot;alert&quot;&gt;You are watching this ticket&lt;/div&gt;&rsquo;; } return $return; });  ClientAreaPageSubmitTicket Executes on the client area ticket submission page and accepts a return of key/value pairs to be made available as additional Smarty template parameters.

	<hr>
	

  </div>

</main>


<footer class="footer">
    <div class="container">
        <div class="row">
            <nav>
                <div class="col-sm-3">
                    <h3>Learn</h3>
                    <ul>
                        <li><a href="//developers.whmcs.com/about/">About WHMCS</a></li>
                        <li><a href="//developers.whmcs.com/quick-start/">Quick start</a></li>
                        <li><a href="//developers.whmcs.com/api-reference/">API Reference</a></li>
                        <li><a href="//docs.whmcs.com/classes/">Classes Reference</a></li>
                        <li><a href="//developers.whmcs.com/about/faq/">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-sm-4">
                    <h3>Contribute</h3>
                    <ul>
                        <li><a href="//developers.whmcs.com/about/contribute/">Contribute</a></li>
                        <li><a href="https://github.com/whmcs/" target="_blank">Github</a></li>
                    </ul>
                </div>
                <div class="col-sm-5">
                    <h3>Stay up to date</h3>
                    <div class="subscribe-form">
                        <p class="muted subscribe-lead">Join our developers mailing list to be kept up-to-date.</p>
                        <div class="alert alert-success sub-success-message hidden" role="alert">
                            <strong>Thank You!</strong> You have been subscribed.
                        </div>
                        <div class="alert alert-danger sub-error-message hidden" role="alert">
                            <strong>Sorry</strong> <span id="error-message-text"></span>
                        </div>
                        <form action="//www.whmcs.com/members/subscribe.php" method="post" id="frmSubscribe">
                            <input type="hidden" name="name" value="Subscriber">
                            <input type="hidden" name="developer" value="dev">
                            <div class="input-group">
                                <input type="email" name="email" class="form-control" placeholder="you@yourdomain.com">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-info">
                                        SUBSCRIBE
                                    </button>
                                </span>
                            </div>
                        </form>
                    </div>
                    <p>
                        We won't spam you.
                    </p>
                </div>
            </nav>
        </div>
        <div class="row">
            <div class="col-md-7">
                <p>Found an error or a typo in these docs? <a href="https://github.com/WHMCS/developer-docs/issues">Submit an issue or a pull request</a></p>
            </div>
            <div class="col-md-5">
                <p class="pull-right">
                    Copyright &copy; WHMCS 2017. All rights reserved.
                    <br>
                </p>
            </div>
        </div>
    </div>
</footer>

<div style="width:0px;overflow:hidden;height:0px;">
    <gcse:search noResultsString="No matches found. Please try a different search term or try contacting our support team."></gcse:search>
</div>

<script src="//developers.whmcs.com/js/jquery.min.js"></script>
<script src="//developers.whmcs.com/js/bootstrap.min.js"></script>
<script src="//developers.whmcs.com/js/search.js"></script>
<script src="//developers.whmcs.com/js/prism.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-22019969-15', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>

