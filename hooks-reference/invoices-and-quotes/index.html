<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Invoices and Quotes - WHMCS Developer Documentation</title>
    <meta name="generator" content="Hugo 0.17" />

    
    <meta name="description" content="WHMCS developer documentation - themes, modules, hooks, oauth, api and more...">
    
    <link rel="canonical" href="//developers.whmcs.com/hooks-reference/invoices-and-quotes/">
    
    <meta name="author" content="WHMCS Development Team">
    

    <link rel="stylesheet" href="//developers.whmcs.com/css/bootstrap.min.css">
    <link rel="stylesheet" href="//developers.whmcs.com/css/styles.css?v=3">
    <link rel="stylesheet" href="//developers.whmcs.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="//developers.whmcs.com/css/prism.css">

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700">

    

  </head>
  <body class="language-php">

<header class="header">





<div class="container">
<nav class="navbar navbar-whmcs">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#primary-nav" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.whmcs.com/"><img src="//developers.whmcs.com/img/logo.png" width="148" height="34"></a>
    </div>

    <div class="collapse navbar-collapse" id="primary-nav">
      <ul class="nav navbar-nav">
        <li><a href="//developers.whmcs.com/"><span class="hidden-sm">Developer Documentation</span><span class="visible-sm">Developer Docs</span></a></li>
        <li class="visible-xs"><a href="//developers.whmcs.com/">Home</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/themes/">Themes</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/languages/">Languages</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/modules/">Modules</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/oauth/">OAuth</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/hooks/">Hooks</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/api/">API</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/advanced/">Advanced</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="//developers.whmcs.com/api-reference/">API Reference</a></li>
        <li><a href="//developers.whmcs.com/hooks-reference/">Hook Reference</a></li>
        <li><a href="https://github.com/whmcs" target="_blank"><i class="fa fa-github"></i></a></li>
      </ul>
      <form class="navbar-form navbar-right visible-xs" id="docsSearchMobile">
        <div class="aa-input-container" id="aa-input-container">
            <input type="search" id="inputSearchMobile" class="aa-input-search" placeholder="Search documentation" name="search" autocomplete="off" />
            <svg class="aa-input-icon" viewBox="654 -372 1664 1664">
                <path d="M1806,332c0-123.3-43.8-228.8-131.5-316.5C1586.8-72.2,1481.3-116,1358-116s-228.8,43.8-316.5,131.5  C953.8,103.2,910,208.7,910,332s43.8,228.8,131.5,316.5C1129.2,736.2,1234.7,780,1358,780s228.8-43.8,316.5-131.5  C1762.2,560.8,1806,455.3,1806,332z M2318,1164c0,34.7-12.7,64.7-38,90s-55.3,38-90,38c-36,0-66-12.7-90-38l-343-342  c-119.3,82.7-252.3,124-399,124c-95.3,0-186.5-18.5-273.5-55.5s-162-87-225-150s-113-138-150-225S654,427.3,654,332  s18.5-186.5,55.5-273.5s87-162,150-225s138-113,225-150S1262.7-372,1358-372s186.5,18.5,273.5,55.5s162,87,225,150s113,138,150,225  S2062,236.7,2062,332c0,146.7-41.3,279.7-124,399l343,343C2305.7,1098.7,2318,1128.7,2318,1164z" />
            </svg>
        </div>
      </form>
    </div>
  </div>
</nav>
</div>

<div class="headline-bar hidden-xs">
<nav class="navbar navbar-main-nav">
  <div class="container">
    <div class="collapse navbar-collapse" id="secondary-nav">
      <ul class="nav navbar-nav">
        <li><a href="//developers.whmcs.com/">Home</a></li>
            <li><a href="//developers.whmcs.com/themes/">Themes</a></li>
            <li><a href="//developers.whmcs.com/languages/">Languages</a></li>
            <li><a href="//developers.whmcs.com/modules/">Modules</a></li>
            <li><a href="//developers.whmcs.com/oauth/">OAuth</a></li>
            <li><a href="//developers.whmcs.com/hooks/">Hooks</a></li>
            <li><a href="//developers.whmcs.com/api/">API</a></li>
            <li><a href="//developers.whmcs.com/advanced/">Advanced</a></li>
      </ul>
      <form class="navbar-form navbar-right" id="docsSearch">
        <div class="aa-input-container" id="aa-input-container">
            <input type="search" id="inputSearch" class="aa-input-search" placeholder="Search documentation" name="search" autocomplete="off" />
            <svg class="aa-input-icon" viewBox="654 -372 1664 1664">
                <path d="M1806,332c0-123.3-43.8-228.8-131.5-316.5C1586.8-72.2,1481.3-116,1358-116s-228.8,43.8-316.5,131.5  C953.8,103.2,910,208.7,910,332s43.8,228.8,131.5,316.5C1129.2,736.2,1234.7,780,1358,780s228.8-43.8,316.5-131.5  C1762.2,560.8,1806,455.3,1806,332z M2318,1164c0,34.7-12.7,64.7-38,90s-55.3,38-90,38c-36,0-66-12.7-90-38l-343-342  c-119.3,82.7-252.3,124-399,124c-95.3,0-186.5-18.5-273.5-55.5s-162-87-225-150s-113-138-150-225S654,427.3,654,332  s18.5-186.5,55.5-273.5s87-162,150-225s138-113,225-150S1262.7-372,1358-372s186.5,18.5,273.5,55.5s162,87,225,150s113,138,150,225  S2062,236.7,2062,332c0,146.7-41.3,279.7-124,399l343,343C2305.7,1098.7,2318,1128.7,2318,1164z" />
            </svg>
        </div>
      </form>
    </div>
  </div>
</nav>
</div>

</header>


<main class="main">

  <div class="container">
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-sm-3 sidebar-offcanvas">

        
          <ul class="sidebar-nav">
            
  <li class="active parent" data-nav-id="/hooks-reference/">
    <a href="//developers.whmcs.com/hooks-reference/">
      <span>
        
          <i class='fa fa-link fa-fw'></i>
        
         Hooks Reference
       </span>
    </a>
    
    <ul>
      
      
      
      
        <li class="" data-nav-id="/hooks-reference/addon/">
          <a href="//developers.whmcs.com/hooks-reference/addon/">
            <span>Addon</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/admin-area/">
          <a href="//developers.whmcs.com/hooks-reference/admin-area/">
            <span>Admin Area</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/authentication/">
          <a href="//developers.whmcs.com/hooks-reference/authentication/">
            <span>Authentication</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/client/">
          <a href="//developers.whmcs.com/hooks-reference/client/">
            <span>Client</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/client-area-interface/">
          <a href="//developers.whmcs.com/hooks-reference/client-area-interface/">
            <span>Client Area Interface</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/contact/">
          <a href="//developers.whmcs.com/hooks-reference/contact/">
            <span>Contact</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/cron/">
          <a href="//developers.whmcs.com/hooks-reference/cron/">
            <span>Cron</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/domain/">
          <a href="//developers.whmcs.com/hooks-reference/domain/">
            <span>Domain</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/everything-else/">
          <a href="//developers.whmcs.com/hooks-reference/everything-else/">
            <span>Everything Else</span>
          </a>
        </li>
      
      
      
        <li class="active" data-nav-id="/hooks-reference/invoices-and-quotes/">
          <a href="//developers.whmcs.com/hooks-reference/invoices-and-quotes/">
            <span>Invoices and Quotes</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/module/">
          <a href="//developers.whmcs.com/hooks-reference/module/">
            <span>Module</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/output/">
          <a href="//developers.whmcs.com/hooks-reference/output/">
            <span>Output</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/products-and-services/">
          <a href="//developers.whmcs.com/hooks-reference/products-and-services/">
            <span>Products and Services</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/registrar-module/">
          <a href="//developers.whmcs.com/hooks-reference/registrar-module/">
            <span>Registrar Module</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/service/">
          <a href="//developers.whmcs.com/hooks-reference/service/">
            <span>Service</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/shopping-cart/">
          <a href="//developers.whmcs.com/hooks-reference/shopping-cart/">
            <span>Shopping Cart</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/support-tools/">
          <a href="//developers.whmcs.com/hooks-reference/support-tools/">
            <span>Support Tools</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/ticket/">
          <a href="//developers.whmcs.com/hooks-reference/ticket/">
            <span>Ticket</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/hooks-reference/user/">
          <a href="//developers.whmcs.com/hooks-reference/user/">
            <span>User</span>
          </a>
        </li>
      
      
    </ul>
    
  </li>


          </ul>
        

      </div>
      <div class="col-sm-9">

        <div class="breadcrumb-nav">

            <div class="pull-right">
              <a class="suggest-an-edit" href="https://github.com/WHMCS/developer-docs" target="blank">
                <i class="fa fa-code-fork"></i>
                <span class="hidden-xs">Suggest an edit</span>
              </a>
            </div>

            <div class="visible-xs pull-left">
                <button type="button" class="btn btn-toggle-sidebar" data-toggle="offcanvas">
                    <i class="fa fa-list-alt"></i>
                </button>
            </div>

            <div id="breadcrumbs">
                
                
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                    
                    
                <a href="//developers.whmcs.com/hooks-reference/" itemprop="url"><span itemprop="title">Hooks Reference</span></a> <i class="fa fa-angle-right"></i>
                    
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                <span itemprop="title"> Invoices and Quotes</span>
              </div>
            </div>


			<h1>Invoices and Quotes </h1>

			

<p>The following hooks are provided for Invoices and Quotes related events.</p>

<h2 id="acceptquote">AcceptQuote</h2>

<p>Executes when a client is accepting a quote.</p>

<h4 id="parameters">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>quoteid</td>
<td>int</td>
<td>The id of the quote being accepted.</td>
</tr>

<tr>
<td>invoiceid</td>
<td>int</td>
<td>The id of the invoice created for the quote (if applicable).</td>
</tr>
</tbody>
</table>

<h4 id="response">Response</h4>

<p>No response supported</p>

<h4 id="example-code">Example Code</h4>

<pre><code>&lt;?php
add_hook('AcceptQuote', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="addinvoicelatefee">AddInvoiceLateFee</h2>

<p>Executes when a late fee has been added to an invoice</p>

<h4 id="parameters-1">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-1">Response</h4>

<p>No response supported</p>

<h4 id="example-code-1">Example Code</h4>

<pre><code>&lt;?php
add_hook('AddInvoiceLateFee', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="addinvoicepayment">AddInvoicePayment</h2>

<p>Invoked when a payment is applied to an invoice (including partial payments).</p>

<h4 id="parameters-2">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td>The invoice id payment was applied to</td>
</tr>
</tbody>
</table>

<h4 id="response-2">Response</h4>

<p>No response supported</p>

<h4 id="example-code-2">Example Code</h4>

<pre><code>&lt;?php
add_hook('AddInvoicePayment', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="addtransaction">AddTransaction</h2>

<p>Executes when a transaction is created. Can be a payment or a refund.</p>

<h4 id="parameters-3">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>id</td>
<td>int</td>
<td>Transaction ID</td>
</tr>

<tr>
<td>userid</td>
<td>int</td>
<td>User ID</td>
</tr>

<tr>
<td>currency</td>
<td>int</td>
<td>Currency ID (if not related to a client, otherwise client currency)</td>
</tr>

<tr>
<td>gateway</td>
<td>string</td>
<td></td>
</tr>

<tr>
<td>date</td>
<td>\datetime</td>
<td></td>
</tr>

<tr>
<td>description</td>
<td>string</td>
<td></td>
</tr>

<tr>
<td>amountin</td>
<td>float</td>
<td></td>
</tr>

<tr>
<td>fees</td>
<td>float</td>
<td></td>
</tr>

<tr>
<td>amountout</td>
<td>float</td>
<td></td>
</tr>

<tr>
<td>rate</td>
<td>float</td>
<td>Exchange rate</td>
</tr>

<tr>
<td>transid</td>
<td>string</td>
<td>Transaction ID provided by gateway or admin user</td>
</tr>

<tr>
<td>invocieid</td>
<td>int</td>
<td>Invoice ID to which the transaction was applied</td>
</tr>

<tr>
<td>refundid</td>
<td>int</td>
<td>Refund ID if a refund</td>
</tr>
</tbody>
</table>

<h4 id="response-3">Response</h4>

<p>No response supported</p>

<h4 id="example-code-3">Example Code</h4>

<pre><code>&lt;?php
add_hook('AddTransaction', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="afterinvoicinggenerateinvoiceitems">AfterInvoicingGenerateInvoiceItems</h2>

<p>Executes after invoice generation allowing for after invoicing clean-up.</p>

<h4 id="parameters-4">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>No input parameters for this hook point.</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-4">Response</h4>

<p>No response supported</p>

<h4 id="example-code-4">Example Code</h4>

<pre><code>&lt;?php
add_hook('AfterInvoicingGenerateInvoiceItems', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="cancelandrefundorder">CancelAndRefundOrder</h2>

<p>Runs when an order is requested to be cancelled and refunded, prior to the change of status actually occurring.</p>

<h4 id="parameters-5">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>orderid</td>
<td>int</td>
<td>The order ID</td>
</tr>
</tbody>
</table>

<h4 id="response-5">Response</h4>

<p>No response supported</p>

<h4 id="example-code-5">Example Code</h4>

<pre><code>&lt;?php
add_hook('CancelAndRefundOrder', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoicecancelled">InvoiceCancelled</h2>

<p>Executes when an invoice is being cancelled</p>

<h4 id="parameters-6">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-6">Response</h4>

<p>No response supported</p>

<h4 id="example-code-6">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoiceCancelled', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoicechangegateway">InvoiceChangeGateway</h2>

<p>Executes when changing the gateway on an invoice.</p>

<h4 id="parameters-7">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td>The id of the invoice being updated.</td>
</tr>

<tr>
<td>paymentmethod</td>
<td>string</td>
<td>The new payment method selected.</td>
</tr>
</tbody>
</table>

<h4 id="response-7">Response</h4>

<p>No response supported</p>

<h4 id="example-code-7">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoiceChangeGateway', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoicecreated">InvoiceCreated</h2>

<p>Executed when an invoice has left &ldquo;Draft&rdquo; status and is available to its respective client. Execution of this hook occurs after sending the <code>Invoice Created</code> email.</p>

<h4 id="parameters-8">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>source</td>
<td>string</td>
<td>Indicates where the invoice creation action originated, can be one of <code>adminarea</code>, <code>api</code> or <code>autogen</code></td>
</tr>

<tr>
<td>user</td>
<td>mixed</td>
<td>The user who initiated the invoice creation (either <code>system</code> or an admin ID value).</td>
</tr>

<tr>
<td>invoiceid</td>
<td>int</td>
<td>The invoice ID.</td>
</tr>

<tr>
<td>status</td>
<td>string</td>
<td>The status of the released invoice.</td>
</tr>
</tbody>
</table>

<h4 id="response-8">Response</h4>

<p>No response supported</p>

<h4 id="example-code-8">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoiceCreated', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoicecreation">InvoiceCreation</h2>

<p>Executes when an invoice is first created. The invoice has not been finalised and delivered to the client at this point. Changes can be made to line items at this point. The invoice totals will be recalculated post execution of this hook point.</p>

<h4 id="parameters-9">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>source</td>
<td>string</td>
<td>Indicates where the invoice creation action originated, can be one of <code>adminarea</code>, <code>api</code> or <code>autogen</code></td>
</tr>

<tr>
<td>user</td>
<td>mixed</td>
<td>User who initiated the invoice creation, either <code>system</code> or an admin ID value</td>
</tr>

<tr>
<td>invoiceid</td>
<td>int</td>
<td>The ID of the newly created invoice</td>
</tr>

<tr>
<td>status</td>
<td>string</td>
<td>The status of the newly created invoice</td>
</tr>
</tbody>
</table>

<h4 id="response-9">Response</h4>

<p>No response supported</p>

<h4 id="example-code-9">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoiceCreation', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoicecreationpreemail">InvoiceCreationPreEmail</h2>

<p>Executes as an invoice is being created in the admin area before the email is being sent</p>

<h4 id="parameters-10">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>source</td>
<td>string</td>
<td>When the invoice is being created</td>
</tr>

<tr>
<td>user</td>
<td>int</td>
<td>string</td>
</tr>

<tr>
<td>invoiceid</td>
<td>int</td>
<td>The id of the newly created invoice</td>
</tr>

<tr>
<td>status</td>
<td>string</td>
<td>The status of the newly created invoice</td>
</tr>
</tbody>
</table>

<h4 id="response-10">Response</h4>

<p>No response supported</p>

<h4 id="example-code-10">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoiceCreationPreEmail', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoicepaid">InvoicePaid</h2>

<p>Executes when an invoice is Paid following the email receipt having been sent and any automation tasks associated with the payment action having been run.</p>

<h4 id="parameters-11">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-11">Response</h4>

<p>No response supported</p>

<h4 id="example-code-11">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoicePaid', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoicepaidpreemail">InvoicePaidPreEmail</h2>

<p>Executes when an invoice is Paid prior to any email or automation tasks associated with the payment action having been run.</p>

<h4 id="parameters-12">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-12">Response</h4>

<p>No response supported</p>

<h4 id="example-code-12">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoicePaidPreEmail', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoicepaymentreminder">InvoicePaymentReminder</h2>

<p>Executes when an automated invoice payment reminder is sent.</p>

<h4 id="parameters-13">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td></td>
</tr>

<tr>
<td>type</td>
<td>string</td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-13">Response</h4>

<p>No response supported</p>

<h4 id="example-code-13">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoicePaymentReminder', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoicerefunded">InvoiceRefunded</h2>

<p>Executes when an invoice status is changed to Refunded.</p>

<h4 id="parameters-14">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td>Invoice ID</td>
</tr>
</tbody>
</table>

<h4 id="response-14">Response</h4>

<p>No response supported</p>

<h4 id="example-code-14">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoiceRefunded', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoicesplit">InvoiceSplit</h2>

<p>Executes as an invoice is being split</p>

<h4 id="parameters-15">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>originalinvoiceid</td>
<td>int</td>
<td>The id of the original invoice</td>
</tr>

<tr>
<td>newinvoiceid</td>
<td>int</td>
<td>The id of the new invoice</td>
</tr>
</tbody>
</table>

<h4 id="response-15">Response</h4>

<p>No response supported</p>

<h4 id="example-code-15">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoiceSplit', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="invoiceunpaid">InvoiceUnpaid</h2>

<p>Executes when an invoice is being marked as Unpaid</p>

<h4 id="parameters-16">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-16">Response</h4>

<p>No response supported</p>

<h4 id="example-code-16">Example Code</h4>

<pre><code>&lt;?php
add_hook('InvoiceUnpaid', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="logtransaction">LogTransaction</h2>

<p>Runs any time a payment gateway callback is received and logged.</p>

<h4 id="parameters-17">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>gateway</td>
<td>string</td>
<td>The payment gateway name</td>
</tr>

<tr>
<td>data</td>
<td>string</td>
<td>A string formatted version of all post data received</td>
</tr>

<tr>
<td>result</td>
<td>string</td>
<td>The status the gateway module returned</td>
</tr>
</tbody>
</table>

<h4 id="response-17">Response</h4>

<p>No response supported</p>

<h4 id="example-code-17">Example Code</h4>

<pre><code>&lt;?php
add_hook('LogTransaction', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="manualrefund">ManualRefund</h2>

<p>Executes when an invoice is refunded via the Manual Refund option.</p>

<h4 id="parameters-18">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>transid</td>
<td>string</td>
<td>Transaction ID of the original payment</td>
</tr>

<tr>
<td>amount</td>
<td>float</td>
<td>The amount to be refunded</td>
</tr>
</tbody>
</table>

<h4 id="response-18">Response</h4>

<p>No response supported</p>

<h4 id="example-code-18">Example Code</h4>

<pre><code>&lt;?php
add_hook('ManualRefund', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="preinvoicinggenerateinvoiceitems">PreInvoicingGenerateInvoiceItems</h2>

<p>Executes prior to invoice generation to allow for manipulation of stored data prior to aggregation of due items.</p>

<h4 id="parameters-19">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>No input parameters for this hook point.</td>
<td></td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-19">Response</h4>

<p>No response supported</p>

<h4 id="example-code-19">Example Code</h4>

<pre><code>&lt;?php

use WHMCS\Service\Service;

/**
 * Prevent invoicing of any new services added to clientID 5
 */

add_hook('PreInvoicingGenerateInvoiceItems', 1, function() {
    $services = Service::where('userid', 5)
        -&gt;where('billingcycle', '!=', 'Free Account')
        -&gt;get();

    foreach ($services as $service) {
        $service-&gt;billingcycle = 'Free Account';
        $service-&gt;save();
    }
});
</code></pre>

<h2 id="quotecreated">QuoteCreated</h2>

<p>Executes when a new quote is created.</p>

<h4 id="parameters-20">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>quoteid</td>
<td>int</td>
<td></td>
</tr>

<tr>
<td>status</td>
<td>string</td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-20">Response</h4>

<p>No response supported</p>

<h4 id="example-code-20">Example Code</h4>

<pre><code>&lt;?php
add_hook('QuoteCreated', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="quotestatuschange">QuoteStatusChange</h2>

<p>Executes when a quote status is updated</p>

<h4 id="parameters-21">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>quoteid</td>
<td>int</td>
<td></td>
</tr>

<tr>
<td>status</td>
<td>string</td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-21">Response</h4>

<p>No response supported</p>

<h4 id="example-code-21">Example Code</h4>

<pre><code>&lt;?php
add_hook('QuoteStatusChange', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="updateinvoicetotal">UpdateInvoiceTotal</h2>

<p>Executes when an invoice is updated with changes to or additions of line items. Can be used to manipulate the invoice.</p>

<h4 id="parameters-22">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td>Invoice ID</td>
</tr>
</tbody>
</table>

<h4 id="response-22">Response</h4>

<p>No response supported</p>

<h4 id="example-code-22">Example Code</h4>

<pre><code>&lt;?php
add_hook('UpdateInvoiceTotal', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>

<h2 id="viewinvoicedetailspage">ViewInvoiceDetailsPage</h2>

<p>Executes as the invoice is being viewed as a client</p>

<h4 id="parameters-23">Parameters</h4>

<table>
<thead>
<tr>
<th>Variable</th>
<th>Type</th>
<th>Notes</th>
</tr>
</thead>

<tbody>
<tr>
<td>invoiceid</td>
<td>int</td>
<td></td>
</tr>
</tbody>
</table>

<h4 id="response-23">Response</h4>

<p>No response supported</p>

<h4 id="example-code-23">Example Code</h4>

<pre><code>&lt;?php
add_hook('ViewInvoiceDetailsPage', 1, function($vars) {
    // Perform hook code here...
});
</code></pre>


			<div class="topic-navigation clearfix">
                
                
            </div>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>

        </div>
  </div>
</div>
</main>


<footer class="footer">
    <div class="container">
        <div class="row">
            <nav>
                <div class="col-sm-3">
                    <h3>Learn</h3>
                    <ul>
                        <li><a href="//developers.whmcs.com/about/">About WHMCS</a></li>
                        <li><a href="//developers.whmcs.com/about/quick-start/">Quick start</a></li>
                        <li><a href="//developers.whmcs.com/api-reference/">API Reference</a></li>
                        <li><a href="https://docs.whmcs.com/classes/">Classes Reference</a></li>
                        <li><a href="//developers.whmcs.com/about/faq/">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-sm-4">
                    <h3>Contribute</h3>
                    <ul>
                        <li><a href="//developers.whmcs.com/about/contribute/">Contribute</a></li>
                        <li><a href="https://github.com/whmcs/" target="_blank">Github</a></li>
                    </ul>
                </div>
                <div class="col-sm-5">
                    <h3>Stay up to date</h3>
                    <div class="subscribe-form">
                        <p class="muted subscribe-lead">Join our developers mailing list to be kept up-to-date.</p>
                        <div class="alert alert-success sub-success-message hidden" role="alert">
                            <strong>Thank You!</strong> You have been subscribed.
                        </div>
                        <div class="alert alert-danger sub-error-message hidden" role="alert">
                            <strong>Sorry</strong> <span id="error-message-text"></span>
                        </div>
                        <form action="//www.whmcs.com/members/subscribe.php" method="post" id="frmSubscribe">
                            <input type="hidden" name="name" value="Subscriber">
                            <input type="hidden" name="developer" value="dev">
                            <div class="input-group">
                                <input type="email" name="email" class="form-control" placeholder="you@yourdomain.com">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-info">
                                        SUBSCRIBE
                                    </button>
                                </span>
                            </div>
                        </form>
                    </div>
                    <p>
                        We won't spam you.
                    </p>
                </div>
            </nav>
        </div>
        <div class="row">
            <div class="col-md-7">
                <p>Found an error or a typo in these docs? <a href="https://github.com/WHMCS/developer-docs/issues">Submit an issue or a pull request</a></p>
            </div>
            <div class="col-md-5">
                <p class="pull-right">
                    Copyright &copy; WHMCS 2021. All rights reserved.
                    <br>
                </p>
            </div>
        </div>
    </div>
</footer>

<script src="//developers.whmcs.com/js/jquery.min.js"></script>
<script src="//developers.whmcs.com/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
<script src="https://cdn.jsdelivr.net/autocomplete.js/0/autocomplete.jquery.min.js"></script>
<script src="//developers.whmcs.com/js/search.js?v=2"></script>
<script src="//developers.whmcs.com/js/prism.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-22019969-15', 'auto');
  ga('send', 'pageview');

</script>

  </body>
</html>

