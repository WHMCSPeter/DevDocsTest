<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Domain Syncronisation - WHMCS Developer Documentation</title>
    <meta name="generator" content="Hugo 0.16" />

    
    <meta name="description" content="WHMCS developer documentation - themes, modules, hooks, oauth, api and more...">
    
    <link rel="canonical" href="//developers.whmcs.com/domain-registrars/domain-syncing/">
    
    <meta name="author" content="WHMCS Development Team">
    

    <link rel="stylesheet" href="//developers.whmcs.com/css/bootstrap.min.css">
    <link rel="stylesheet" href="//developers.whmcs.com/css/styles.css">
    <link rel="stylesheet" href="//developers.whmcs.com/css/font-awesome.min.css">
    <link rel="stylesheet" href="//developers.whmcs.com/css/prism.css">

    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:400,700">

    

  </head>
  <body class="language-php">

<header class="header">





<div class="container">
<nav class="navbar navbar-whmcs">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#primary-nav" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="http://www.whmcs.com/"><img src="//developers.whmcs.com/img/logo.png" width="148" height="34"></a>
    </div>

    <div class="collapse navbar-collapse" id="primary-nav">
      <ul class="nav navbar-nav">
        <li><a href="//developers.whmcs.com/"><span class="hidden-sm">Developer Documentation</span><span class="visible-sm">Developer Docs</span></a></li>
        <li class="visible-xs"><a href="//developers.whmcs.com/">Home</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/themes/">Themes</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/languages/">Languages</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/modules/">Modules</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/oauth/">OAuth</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/hooks/">Hooks</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/api/">API</a></li>
            <li class="visible-xs"><a href="//developers.whmcs.com/advanced/">Advanced</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="//developers.whmcs.com/api-reference/">API Reference</a></li>
        <li><a href="//developers.whmcs.com/hooks-reference/">Hook Reference</a></li>
        <li><a href="https://github.com/whmcs" target="_blank"><i class="fa fa-github"></i></a></li>
      </ul>
      <form class="navbar-form navbar-right visible-xs" id="docsSearchMobile">
        <div class="input-group">
          <input type="text" id="docsQueryMobile" class="form-control" placeholder="Search">
          <span class="input-group-btn">
            <button class="btn" type="submit" id="btnSearchDocsMobile"><i class="fa fa-search"></i></button>
          </span>
        </div>
      </form>
    </div>
  </div>
</nav>
</div>

<div class="headline-bar hidden-xs">
<nav class="navbar navbar-main-nav">
  <div class="container">
    <div class="collapse navbar-collapse" id="secondary-nav">
      <ul class="nav navbar-nav">
        <li><a href="//developers.whmcs.com/">Home</a></li>
            <li><a href="//developers.whmcs.com/themes/">Themes</a></li>
            <li><a href="//developers.whmcs.com/languages/">Languages</a></li>
            <li><a href="//developers.whmcs.com/modules/">Modules</a></li>
            <li><a href="//developers.whmcs.com/oauth/">OAuth</a></li>
            <li><a href="//developers.whmcs.com/hooks/">Hooks</a></li>
            <li><a href="//developers.whmcs.com/api/">API</a></li>
            <li><a href="//developers.whmcs.com/advanced/">Advanced</a></li>
      </ul>
      <form class="navbar-form navbar-right" id="docsSearch">
        <div class="input-group">
          <input type="text" id="docsQuery" class="form-control" placeholder="Search">
          <span class="input-group-btn">
            <button class="btn" type="submit" id="btnSearchDocs"><i class="fa fa-search"></i></button>
          </span>
        </div>
      </form>
    </div>
  </div>
</nav>
</div>

</header>


<main class="main">

  <div class="container">
    <div class="row row-offcanvas row-offcanvas-left">
      <div class="col-sm-3 sidebar-offcanvas">

        
          <ul class="sidebar-nav">
            
  <li class="active parent" data-nav-id="/domain-registrars/">
    <a href="//developers.whmcs.com/domain-registrars/">
      <span>
        
          <i class='fa fa-globe fa-fw'></i>
        
         Domain Registrars
       </span>
    </a>
    
    <ul>
      
      
      
      
        <li class="" data-nav-id="/domain-registrars/getting-started/">
          <a href="//developers.whmcs.com/domain-registrars/getting-started/">
            <span>Getting Started</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/domain-registrars/config-options/">
          <a href="//developers.whmcs.com/domain-registrars/config-options/">
            <span>Configuration Options</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/domain-registrars/function-index/">
          <a href="//developers.whmcs.com/domain-registrars/function-index/">
            <span>Function Index</span>
          </a>
        </li>
      
      
      
        <li class="active" data-nav-id="/domain-registrars/domain-syncing/">
          <a href="//developers.whmcs.com/domain-registrars/domain-syncing/">
            <span>Domain Syncronisation</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/domain-registrars/module-parameters/">
          <a href="//developers.whmcs.com/domain-registrars/module-parameters/">
            <span>Module Parameters</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/domain-registrars/module-functions/">
          <a href="//developers.whmcs.com/domain-registrars/module-functions/">
            <span>Module Functions</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/domain-registrars/availability-checks/">
          <a href="//developers.whmcs.com/domain-registrars/availability-checks/">
            <span>Availability Checks</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/domain-registrars/premium-domains/">
          <a href="//developers.whmcs.com/domain-registrars/premium-domains/">
            <span>Premium Domains</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/domain-registrars/extending-further/">
          <a href="//developers.whmcs.com/domain-registrars/extending-further/">
            <span>Extending Further</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/domain-registrars/hooks/">
          <a href="//developers.whmcs.com/domain-registrars/hooks/">
            <span>Hooks</span>
          </a>
        </li>
      
      
      
        <li class="" data-nav-id="/domain-registrars/module-logging/">
          <a href="//developers.whmcs.com/domain-registrars/module-logging/">
            <span>Module Logging</span>
          </a>
        </li>
      
      
    </ul>
    
  </li>


          </ul>
        

      </div>
      <div class="col-sm-9">

        <div class="breadcrumb-nav">

            <div class="pull-right">
              <a class="suggest-an-edit" href="https://github.com/WHMCS/developer-docs" target="blank">
                <i class="fa fa-code-fork"></i>
                <span class="hidden-xs">Suggest an edit</span>
              </a>
            </div>

            <div class="visible-xs pull-left">
                <button type="button" class="btn btn-toggle-sidebar" data-toggle="offcanvas">
                    <i class="fa fa-list-alt"></i>
                </button>
            </div>

            <div id="breadcrumbs">
                
                
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                    
                    
                <a href="//developers.whmcs.com/domain-registrars/" itemprop="url"><span itemprop="title">Domain Registrars</span></a> <i class="fa fa-angle-right"></i>
                    
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                  
                
                <span itemprop="title"> Domain Syncronisation</span>
              </div>
            </div>


			<h1>Domain Syncronisation </h1>

			

<p>The domain syncronisation functions allow you to propogate any domain expiry date and status changes at the registry level to WHMCS.  This is particularly useful for domain transfers where completion of the transfer and expiry dates can not be known by WHMCS automatically without it.</p>

<h2 id="domain-syncing">Domain Syncing</h2>

<p>Domain syncing is performed in batches. When defined in your module, the Sync function will be called for 50 domains on a rolling basis each time the domain sync cron is invoked. Once all domains assigned to your module have been synced it will start from the beginning again.</p>

<p>The below example shows the supported return values for the function.</p>

<pre><code>function modulename_Sync($params) {

    /**
     * Available parameters include the following.
     * Any settings defined in your Config Options method will also be available.
     */

    $params['domainid'];
    $params['domain'];
    $params['sld'];
    $params['tld'];
    $params['registrar'];
    $params['regperiod'];
    $params['status'];
    $params['dnsmanagement'];
    $params['emailforwarding'];
    $params['idprotection'];

    // Perform code to fetch domain status here

    return array(
        'active' =&gt; true, // Return true if the domain is active
        'expired' =&gt; false, // Return true if the domain has expired
        'expirydate' =&gt; '2016-11-01', // Return the current expiry date for the domain
    );
}
</code></pre>

<div class="notice tip" ><p>Settings relating to domain syncing are in the <strong>Setup &gt; General Settings &gt; Domains</strong> area. There are 3 key settings:
* <strong><em>Domain Sync Enabled</em></strong> - Check to allow the domain sync cron to actually run.
* <strong><em>Sync Next Due Date</em></strong> - Enable this setting to update next due date to match the expiry field as part of the sync.
* <strong><em>Domain Sync Notify Only</em></strong> - Enable this to allow WHMCS to run the sync checks and report any inconsistencies. But, no changes to the domains will occur. With this enabled you receive an email report listing any discrepancies between the registrar and WHMCS.</p>
</div>


<h2 id="transfer-syncing">Transfer Syncing</h2>

<p>Transfer syncing works in a similar way to domain syncing. When defined in your module, this function will be called for every domain in the Pending Transfer status when the domain sync cron runs.</p>

<p>The Transfer Sync method supports a number of return values.  A completed status indicator, the expiry date, a failed state, and a failure reason.  The below code example demonstrates the use of these.</p>

<pre><code>function modulename_TransferSync($params) {

    /**
     * Available parameters include the following.
     * Any settings defined in your Config Options method will also be available.
     */

    $params['domainid'];
    $params['domain'];
    $params['sld'];
    $params['tld'];
    $params['registrar'];
    $params['regperiod'];
    $params['status'];
    $params['dnsmanagement'];
    $params['emailforwarding'];
    $params['idprotection'];

    // Perform code to fetch transfer status here

    return array(
        'completed' =&gt; true, // Return as true upon successful completion of the transfer
        'expirydate' =&gt; '2017-10-15', // The expiry date of the domain
        'failed' =&gt; false, // Return as true when transfer fails permenantly
        'reason' =&gt; 'Reason message can go here', // Reason for the transfer failure if available
        'error' =&gt; 'Error message goes here', // If the check fails, an error message string can be provided here
    );
}
</code></pre>


			<div class="topic-navigation clearfix">
                
                    <a class="nav nav-prev" href="//developers.whmcs.com/domain-registrars/function-index/">
                        <i class="fa fa-arrow-circle-left"></i>
                        Previous
                    </a>
                
                
                    <a class="nav nav-next" href="//developers.whmcs.com/domain-registrars/module-parameters/">
                        <i class="fa fa-arrow-circle-right"></i>
                        Next
                    </a>
                
            </div>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>

        </div>
  </div>
</div>
</main>


<footer class="footer">
    <div class="container">
        <div class="row">
            <nav>
                <div class="col-sm-3">
                    <h3>Learn</h3>
                    <ul>
                        <li><a href="//developers.whmcs.com/about/">About WHMCS</a></li>
                        <li><a href="//developers.whmcs.com/quick-start/">Quick start</a></li>
                        <li><a href="//developers.whmcs.com/api-reference/">API Reference</a></li>
                        <li><a href="//docs.whmcs.com/classes/">Classes Reference</a></li>
                        <li><a href="//developers.whmcs.com/about/faq/">FAQ</a></li>
                    </ul>
                </div>
                <div class="col-sm-4">
                    <h3>Contribute</h3>
                    <ul>
                        <li><a href="//developers.whmcs.com/about/contribute/">Contribute</a></li>
                        <li><a href="https://github.com/whmcs/" target="_blank">Github</a></li>
                    </ul>
                </div>
                <div class="col-sm-5">
                    <h3>Stay up to date</h3>
                    <div class="subscribe-form">
                        <p class="muted subscribe-lead">Join our developers mailing list to be kept up-to-date.</p>
                        <div class="alert alert-success sub-success-message hidden" role="alert">
                            <strong>Thank You!</strong> You have been subscribed.
                        </div>
                        <div class="alert alert-danger sub-error-message hidden" role="alert">
                            <strong>Sorry</strong> <span id="error-message-text"></span>
                        </div>
                        <form action="//www.whmcs.com/members/subscribe.php" method="post" id="frmSubscribe">
                            <input type="hidden" name="name" value="Subscriber">
                            <input type="hidden" name="developer" value="dev">
                            <div class="input-group">
                                <input type="email" name="email" class="form-control" placeholder="you@yourdomain.com">
                                <span class="input-group-btn">
                                    <button type="submit" class="btn btn-info">
                                        SUBSCRIBE
                                    </button>
                                </span>
                            </div>
                        </form>
                    </div>
                    <p>
                        We won't spam you.
                    </p>
                </div>
            </nav>
        </div>
        <div class="row">
            <div class="col-md-7">
                <p>Found an error or a typo in these docs? <a href="https://github.com/WHMCS/developer-docs/issues">Submit an issue or a pull request</a></p>
            </div>
            <div class="col-md-5">
                <p class="pull-right">
                    Copyright &copy; WHMCS 2017. All rights reserved.
                    <br>
                </p>
            </div>
        </div>
    </div>
</footer>

<div style="width:0px;overflow:hidden;height:0px;">
    <gcse:search noResultsString="No matches found. Please try a different search term or try contacting our support team."></gcse:search>
</div>

<script src="//developers.whmcs.com/js/jquery.min.js"></script>
<script src="//developers.whmcs.com/js/bootstrap.min.js"></script>
<script src="//developers.whmcs.com/js/search.js"></script>
<script src="//developers.whmcs.com/js/prism.js"></script>

  </body>
</html>

